<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- iOS Full screen -->
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />

	<link rel="stylesheet" href="/static/css/bootstrap.min.css">
	<link rel="stylesheet" href="/static/css/main.css">

	<script src="/static/js/jquery.min.js"></script>

	<!-- Web sockets -->
	<script src="/socket.io/socket.io.js"></script>

	<script>
	$(function() {
		function screenSizeUpdate()
		{
			var height = $(window).height();
			console.log(height);
			$("#app").height(height);
		}
		screenSizeUpdate();

		var socket = io.connect();

		socket.on('connect', function() {
		// Connected, let's sign-up to receive messages for this room
			socket.emit('subscribe', "announcements");
			socket.emit('subscribe', "name/aux");
			socket.emit("request", "auxNames");
		});

		socket.on('announcements', function (data) {
			data = JSON.parse(data);
			console.log(data);
			createButtons(data);
		});

		socket.on('name/aux', function (data) {
			data = JSON.parse(data);
			updateName(data["a"], data["n"]);
		});

		function createButtons(data)
		{
			for (i = 0; i < data["auxOutputs"]; i++)
			{
				var input = '<div class="item"><a href="/aux/'+(i+1)+'" class="btn btn-primary btn-lg" id="aux'+(i+1)+'"></a></div>'
					$( "div#app" ).append(input);
			}
		}

		function updateName(aux, name)
		{
			var selector = "a#aux"+aux;
			$(selector).text(name);
		}
	});
	</script>
</head>
<body>
	<div id="app" class="app">
		
	</div>
</body>
</html>